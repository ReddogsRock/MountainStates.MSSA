"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_replace-content_replace-content_component_ts-projects_eav-ui_src_app_-5824bf"],{4513:(b,c,e)=>{e.r(c),e.d(c,{ReplaceContentComponent:()=>j});var i=e(84344),l=e(37580),n=e(34456),a=e(79771),m=e(84175),_=e(31403),h=e(81863),T=e(31016),M=e(93840),R=e(59791),I=e(29658),D=e(12938),B=e(13620),o=e(32760),s=e(59669),r=e(34601),u=e(91922),C=e(70334),E=e(99277),y=e(60852),P=e(67993),t=e(99293),v=e(44444),L=e(3347),K=e(87698),W=e(23731),F=e(8923);function S(x,$){if(1&x&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&x){const p=$.$implicit;t.Y8G("value",p.label),t.R7$(),t.JRh(p.label)}}let j=(()=>{class x{#t;#e;constructor(p,f){this.dialog=p,this.snackBar=f,this.hostClass="dialog-component",this.#t=(0,D.d)(s.y),this.#e=(0,D.d)(y.c),this.#a=(0,B.C)(this.#e.getParams(["guid","part","index"]),d=>({guid:d.guid,part:d.part,index:parseInt(d.index,10)})),this.isAddMode=(0,P.KX)("isAddMode",!!this.#e.getQueryParam("add")),this.filterText=(0,l.geq)(""),this.#n=(0,P.KX)("options",[]),this.options=(0,P.bo)("filteredOptions",()=>{const d=this.filterText().toLocaleLowerCase();return this.#n().filter(g=>g.label.toLocaleLowerCase().includes(d))}),this.canSave=(0,P.bo)("isMatch",()=>this.options().map(d=>d.label).includes(this.filterText()))}#a;#i;#n;ngOnInit(){this.#d(),this.#o(!1,null),this.#e.doOnDialogClosed(()=>{const f=this.#e.router.getCurrentNavigation().extras?.state,d=f?.[Object.keys(f)[0]];this.#o(!0,d)})}closeDialog(){this.dialog.close()}select(p){this.filterText.set(p.option.value)}copySelected(){const p=this.#s(),f={items:[C.c.copy(this.#i,p.id)]},d=(0,u.s)(f);this.#e.navRelative([`edit/${d}`])}#o(p,f){const d=this.#s();this.#t.getItemsPromise(d).then(g=>{const A=Object.entries(g.Items).map(([O,U])=>({id:parseInt(O,10),label:`${U} (${O})`}));if(this.#n.set(A),!d.add&&!p||null!=f){const O=p?f:g.SelectedId,U=this.#n().find(N=>N.id===O)?.label||"";this.filterText.set(U)}this.#i=g.ContentTypeName})}#s(){const p=this.filterText();return{id:this.#n().find(g=>g.label===p)?.id??null,...this.#a,add:this.isAddMode()}}saveAndClose(){this.snackBar.open("Saving...");const p=this.#s();this.#t.saveItem(p).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}#d(){this.dialog.keydownEvents().subscribe(p=>{(0,o.YU)(p)&&this.canSave()&&(p.preventDefault(),this.saveAndClose())})}static#l=this.\u0275fac=function(f){return new(f||x)(t.rXU(h.k),t.rXU(L.UG))};static#r=this.\u0275cmp=t.VBU({type:x,selectors:[["app-replace-content"]],hostVars:1,hostBindings:function(f,d){2&f&&t.Avn("className",d.hostClass)},inputs:{filterText:[1,"filterText"]},outputs:{filterText:"filterTextChange"},decls:25,vars:11,consts:[["auto","matAutocomplete"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],[1,"eav-options-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","matAutocomplete","ngModel"],[3,"optionSelected","hideSingleSelectionIndicator"],["itemSize","48","minBufferPx","500","maxBufferPx","1000"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","","tippy","Create a Copy","tippyPlacement","top",3,"click","disabled"],["align","end"],[3,"action","ngClass","disabled"],[3,"value"]],template:function(f,d){if(1&f){const g=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){return v.eBV(g),v.Njj(d.closeDialog())}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",5),t.nrm(8,"router-outlet"),t.j41(9,"p"),t.EFF(10),t.k0s(),t.j41(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t.EFF(14,"Choose item"),t.k0s(),t.j41(15,"input",8),t.mxI("ngModelChange",function(O){return v.eBV(g),t.DH7(d.filterText,O)||(d.filterText=O),v.Njj(O)}),t.k0s(),t.j41(16,"mat-autocomplete",9,0),t.bIt("optionSelected",function(O){return v.eBV(g),v.Njj(d.select(O))}),t.j41(18,"cdk-virtual-scroll-viewport",10),t.DNE(19,S,2,2,"mat-option",11),t.k0s()()(),t.j41(20,"button",12),t.bIt("click",function(){return v.eBV(g),v.Njj(d.copySelected())}),t.j41(21,"mat-icon"),t.EFF(22,"file_copy"),t.k0s()()()(),t.j41(23,"mat-dialog-actions",13)(24,"app-save-close-button-fab",14),t.bIt("action",function(){return v.eBV(g),v.Njj(d.saveAndClose())}),t.k0s()()()}if(2&f){const g=t.sdS(17);t.R7$(3),t.SpI(" ",d.isAddMode()?"Add Existing Item":"Replace Content Item"," "),t.R7$(7),t.SpI("",d.isAddMode()?"Select a content-item to add to this list.":"By replacing a content-item you can make other content appear in the slot of the original content."," "),t.R7$(5),t.Y8G("matAutocomplete",g),t.R50("ngModel",d.filterText),t.R7$(),t.Y8G("hideSingleSelectionIndicator",!0),t.R7$(2),t.xc7("height",d.options().length<6?48*d.options().length:240,"px"),t.R7$(),t.Y8G("cdkVirtualForOf",d.options()),t.R7$(),t.Y8G("disabled",!d.canSave()),t.R7$(4),t.Y8G("ngClass",d.canSave()?"":"disabled")("disabled",!d.canSave())}},dependencies:[I.n3,T.M,K.j,K.M,R.fS,R.fg,a.jL,a.$3,W.M,a.pN,n.YN,n.me,n.BC,n.vS,i.d6,i.yg,i.E$,_.M,m.Hl,F.M,M.m_,M.An,h.M,r.e,E.i],styles:[".eav-options-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]})}return x})()},4979:(b,c,e)=>{e.d(c,{V:()=>n});var i=e(27092),l=e(44444);let n=(()=>{class a{constructor(){this.subscriptions=new i.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(h){return new(h||a)};static#e=this.\u0275prov=l.jDH({token:a,factory:a.\u0275fac})}return a})()},13620:(b,c,e)=>{function i(n,a){return a(n)}function l(n,a){return a(n)}e.d(c,{C:()=>i,z:()=>l})},18708:(b,c,e)=>{e.d(c,{R:()=>n});var i=e(37580),l=e(99293);let n=(()=>{class a{constructor(_){this.elementRef=_,this._disabled=(0,i.hFB)(!1)}ngOnChanges(_){null!=_.disabled&&this.elementRef.nativeElement.toggleAttribute("disabled",this._disabled())}static#t=this.\u0275fac=function(h){return new(h||a)(l.rXU(l.aKT))};static#e=this.\u0275dir=l.FsC({type:a,selectors:[["","extended-fab-speed-dial-action",""]],inputs:{_disabled:[1,"_disabled"]},features:[l.OA$]})}return a})()},18759:(b,c,e)=>{e.d(c,{d:()=>n});var i=e(37580),l=e(99293);let n=(()=>{class a{constructor(){this.label=(0,i.hFB)("Form.Buttons.SaveAndClose"),this.triggerOnFormSubmit=(0,i.hFB)(!1),this.icon=(0,i.hFB)("done"),this.ngClass=(0,i.hFB)(""),this.disabled=(0,i.hFB)(!1),this.action=(0,i.CGW)()}get isDisabled(){return"function"==typeof this.disabled?!!this.disabled():!!this.disabled}onClick(_){this.isDisabled||this.action.emit(_)}static#t=this.\u0275fac=function(h){return new(h||a)};static#e=this.\u0275dir=l.FsC({type:a,inputs:{label:[1,"label"],triggerOnFormSubmit:[1,"triggerOnFormSubmit"],icon:[1,"icon"],ngClass:[1,"ngClass"],disabled:[1,"disabled"]},outputs:{action:"action"}})}return a})()},18934:(b,c,e)=>{e.d(c,{Q:()=>l});var i=e(99293);let l=(()=>{class n{constructor(m){this.templateRef=m}static#t=this.\u0275fac=function(_){return new(_||n)(i.rXU(i.C4Q))};static#e=this.\u0275dir=i.FsC({type:n,selectors:[["","extendedFabSpeedDialTriggerContent",""]]})}return n})()},20545:(b,c,e)=>{e.d(c,{d:()=>l});var i=e(99293);let l=(()=>{class n{constructor(m){this.templateRef=m}static#t=this.\u0275fac=function(_){return new(_||n)(i.rXU(i.C4Q))};static#e=this.\u0275dir=i.FsC({type:n,selectors:[["","extendedFabSpeedDialActionsContent",""]]})}return n})()},32760:(b,c,e)=>{function i(a){return"Escape"===a.key}function l(a){return("s"===a.key||"S"===a.key)&&(a.ctrlKey||a.metaKey)}function n(a){return"Enter"===a.key&&(a.ctrlKey||a.metaKey)}e.d(c,{JY:()=>l,KL:()=>i,YU:()=>n})},43176:(b,c,e)=>{e.d(c,{$:()=>n});var i=e(27092),l=e(99293);let n=(()=>{class a{constructor(){this.subscriptions=new i.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(h){return new(h||a)};static#e=this.\u0275cmp=l.VBU({type:a,selectors:[["app-base-component"]],decls:0,vars:0,template:function(h,T){},encapsulation:2})}return a})()},60852:(b,c,e)=>{e.d(c,{c:()=>I});var i=e(29658),l=e(51567),n=e(63037),a=e(70271),m=e(5057),_=e(98764),h=e(34435),T=e(4979),M=e(44444);const R={doOnDialogClosed:!0};let I=(()=>{class D extends T.V{constructor(o,s){super(),this.router=o,this.route=s,this.log=(0,h.Tq)({DialogRoutingService:D},R)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}get urlSegments(){return this.router.url.split("/")}getParam(o){return this.route.snapshot.paramMap.get(o)}getParams(o){const s=this.route.snapshot.paramMap;return o.reduce((r,u)=>(r[u]=s.get(u),r),{})}getQueryParam(o){return this.route.snapshot.queryParamMap.get(o)}getQueryParams(o){const s=this.route.snapshot.queryParamMap;return o.reduce((r,u)=>(r[u]=s.get(u),r),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(o){const s=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(r=>(s.a("Dialog closed",{data:r}),o()))),s.end()}doOnDialogClosedWithData(o){const s=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.#t().subscribe(({state:r})=>{s.a("Dialog closed",{state:r}),o(r)})),s.end()}urlSubRoute(o){const s=this.router.createUrlTree([o],{relativeTo:this.route});return this.router.serializeUrl(s)}navPath(o,s){return this.router.navigate([o],s)}navRelative(o,s){return this.router.navigate(o,{...s,relativeTo:this.route})}childDialogClosed$(){return this.router.events.pipe((0,l.p)(o=>o instanceof i.wF),(0,n.Z)(!!this.route.snapshot.firstChild),(0,a.T)(()=>!!this.route.snapshot.firstChild),(0,m.J)(),(0,l.p)(([o,s])=>o&&!s))}#t(){return this.router.events.pipe((0,l.p)(o=>o instanceof i.wF),(0,_.M)(o=>{const s=this.log.fn("childDialogClosed$",{event:o,firstChild:this.route.snapshot.firstChild,snapShot:this.route.snapshot,state:this.router.getCurrentNavigation()?.extras.state});s.a("NavigationEnd",{event:o}),s.end()}),(0,n.Z)(!!this.route.snapshot.firstChild),(0,a.T)(()=>({hasChildNow:!!this.route.snapshot.firstChild,state:this.router.getCurrentNavigation()?.extras.state})),(0,m.J)(),(0,l.p)(([o,s])=>o.hasChildNow&&!s.hasChildNow),(0,a.T)(([o,s])=>({hadChildBefore:o.hasChildNow,hasChildNow:s.hasChildNow,state:s.state})))}static#e=this.\u0275fac=function(s){return new(s||D)(M.KVO(i.Ix),M.KVO(i.nX))};static#a=this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac})}return D})()},74390:(b,c,e)=>{e.d(c,{t:()=>n});var i=e(37580),l=e(99293);let n=(()=>{class a{constructor(_){this.elementRef=_,this.disabled=(0,i.hFB)(!1)}ngOnChanges(_){null!=_.disabled&&this.elementRef.nativeElement.toggleAttribute("disabled",this.disabled())}static#t=this.\u0275fac=function(h){return new(h||a)(l.rXU(l.aKT))};static#e=this.\u0275dir=l.FsC({type:a,selectors:[["","extended-fab-speed-dial-trigger",""]],inputs:{disabled:[1,"disabled"]},features:[l.OA$]})}return a})()},87841:(b,c,e)=>{e.d(c,{d:()=>D});var i=e(87945),l=e(37580),n=e(99293),a=e(75797),m=e(19999),_=e(91817),h=e(63037),T=e(43176),M=e(18708),R=e(20545),I=e(18934);let D=(()=>{class B extends T.${constructor(){super(),this.disabled=(0,l.hFB)(!1),this.open$=new a.t(!1)}ngAfterContentInit(){this.subscriptions.add((0,m.z)([this.open$.pipe((0,_.F)()),this.actionButtons.changes.pipe((0,h.Z)(void 0))]).subscribe(([s])=>{this.actionButtons.forEach((r,u,C)=>{const y=Math.min(.3+.05*(C.length-1),.6),P=(y-.3)/(C.length-1),t=(s?.3+P*u:y-P*u)+"s";r.nativeElement.style.transitionDuration!==t&&(r.nativeElement.style.transitionDuration=t)})}))}ngOnDestroy(){this.open$.complete(),super.ngOnDestroy()}setOpen(s,r){"touch"!==s.pointerType&&this.open$.next(r)}static#t=this.\u0275fac=function(r){return new(r||B)};static#e=this.\u0275cmp=n.VBU({type:B,selectors:[["extended-fab-speed-dial"]],contentQueries:function(r,u,C){if(1&r&&(n.wni(C,I.Q,5),n.wni(C,R.d,5),n.wni(C,M.R,4,n.aKT)),2&r){let E;n.mGM(E=n.lsd())&&(u.trigger=E.first),n.mGM(E=n.lsd())&&(u.actions=E.first),n.mGM(E=n.lsd())&&(u.actionButtons=E)}},inputs:{disabled:[1,"disabled"]},features:[n.Vt3],decls:5,vars:3,consts:[[1,"extended-fab-speed-dial",3,"pointerenter","pointerleave"],[1,"extended-fab-speed-dial-trigger"],[3,"ngTemplateOutlet"],[1,"extended-fab-speed-dial-actions"]],template:function(r,u){1&r&&(n.j41(0,"div",0),n.bIt("pointerenter",function(E){return u.setOpen(E,!0)})("pointerleave",function(E){return u.setOpen(E,!1)}),n.j41(1,"div",1),n.eu8(2,2),n.k0s(),n.j41(3,"div",3),n.eu8(4,2),n.k0s()()),2&r&&(n.BMQ("disabled",u.disabled()||null),n.R7$(2),n.Y8G("ngTemplateOutlet",null==u.trigger?null:u.trigger.templateRef),n.R7$(2),n.Y8G("ngTemplateOutlet",null==u.actions?null:u.actions.templateRef))},dependencies:[i.T3],styles:['extended-fab-speed-dial{display:block}.extended-fab-speed-dial .extended-fab-speed-dial-actions{display:flex;flex-direction:column-reverse;align-items:flex-end;position:absolute;bottom:44px;right:0;pointer-events:none}.extended-fab-speed-dial .extended-fab-speed-dial-actions button[extended-fab-speed-dial-action]{opacity:0;transition:opacity .3s ease-in-out;margin-bottom:8px}.extended-fab-speed-dial:hover:not([disabled]) .extended-fab-speed-dial-actions{pointer-events:all}.extended-fab-speed-dial:hover:not([disabled]) .extended-fab-speed-dial-actions button[extended-fab-speed-dial-action]{opacity:1}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger],.extended-fab-speed-dial button[extended-fab-speed-dial-action]{display:flex;align-items:center;justify-content:center;min-width:48px;height:44px;border:none;border-radius:16px 0;padding-left:14px;padding-right:14px;color:#fff;font-size:12px;white-space:nowrap;background:linear-gradient(125deg,#240e12 10%,#952c42 90%);cursor:pointer;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;box-sizing:border-box}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>mat-icon,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>mat-icon{color:#fff;font-size:20px;width:20px;height:20px;line-height:20px}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span{color:#fff;display:inline-block;white-space:nowrap;overflow:hidden;max-width:0;transition:all .3s ease-in-out}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span:before,.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>span:after,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span:before,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>span:after{content:"";width:8px;display:inline-block}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]>.keybinding-hint,.extended-fab-speed-dial button[extended-fab-speed-dial-action]>.keybinding-hint{padding:2px 0 0;margin:0}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger][disabled],.extended-fab-speed-dial button[extended-fab-speed-dial-trigger].appear-disabled,.extended-fab-speed-dial button[extended-fab-speed-dial-action][disabled],.extended-fab-speed-dial button[extended-fab-speed-dial-action].appear-disabled{cursor:default;color:#00000042;background-color:#1d273d1f}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]:hover>span,.extended-fab-speed-dial button[extended-fab-speed-dial-action]:hover>span{max-width:256px}.extended-fab-speed-dial button[extended-fab-speed-dial-trigger]:hover>.keybinding-hint,.extended-fab-speed-dial button[extended-fab-speed-dial-action]:hover>.keybinding-hint{margin:0 8px 0 4px;padding-top:2px;border-radius:6px;background:#ffffff1a;transition:all .3s ease-in-out}\n'],encapsulation:2})}return B})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.09/dist/ng-edit/projects_eav-ui_src_app_replace-content_replace-content_component_ts-projects_eav-ui_src_app_-5824bf.b0919574f81c2bed.js.map