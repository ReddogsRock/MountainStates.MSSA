var $2sxcJsApi;(()=>{"use strict";var t=function(){function t(){this.frame=void 0,this.callback=void 0}return t.prototype.open=function(t,e){for(var n=10000010,r=window;r!==window.top&&n<10000100;)n++,r=r.parent;var o=document.createElement("div");o.setAttribute("style"," top: 0;left: 0;width: 100%;height: 100%; color-scheme: auto; position:fixed; z-index:"+n),document.body.appendChild(o);var i=document.createElement("iframe");i.setAttribute("allowtransparency","true"),i.setAttribute("style","top: 0;left: 0;width: 100%;height: 100%;"),i.setAttribute("src",t),o.appendChild(i),document.body.className+=" sxc-popup-open",this.frame=i,this.callback=e},t.prototype.close=function(){if(this.frame){document.body.className=document.body.className.replace("sxc-popup-open","");var t=this.frame;t.parentNode.parentNode.removeChild(t.parentNode),this.callback()}},t.prototype.closeThis=function(){window.parent.$2sxc.totalPopup.close()},t}(),e=".",n="~",r=n,o="_",i=["true","false"],a=i.concat(["null"]),s=function(){function t(){}return t.prototype.toUrl=function(t,e){if(void 0===e&&(e=!0),!t)return"";if(Array.isArray(t))throw new Error("only objects can be toUrl(), arrays don't work. Put the array in an object property.");var r=this.toUrlRecursive(t,null,0,e).filter(function(t){return null!=t&&t.length>0}).join(n);return r?n+r:""},t.prototype.toObj=function(t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var o=this.back(t,n);return r?o:function(t){var n={};for(var r in t){var o=r.split(e);o.reduce(function(e,n,i){return e[n]||(e[n]=isNaN(Number(o[i+1]))?o.length-1==i?t[r]:{}:[])},n)}return n}(o)},t.prototype.toUrlRecursive=function(t,n,r,o){var i=this;if(null==t)return[];var a=r>0?e.repeat(r):"";if("object"!=typeof t)return["".concat(a).concat(n,"=").concat(o?l(t):t)];var s=Object.keys(t).map(function(e){return i.toUrlRecursive(t[e],e,r+1,o)});if(0===s.length)return[];var u=s.reduce(function(t,e){return t.concat(Array.isArray(e)?c(e,2):e)},[]);return(r>0?["".concat(a).concat(n),null]:[]).concat(u)},t.prototype.back=function(t,r){if(!t||0===t.length)return[];for(var o=t.replaceAll("=~","=Â¶").replaceAll("~~","#").split(n+e).map(function(t){return null==t?void 0:t.replaceAll("#",n)}).filter(function(t){return t.length>0}),i={},a=[],s=0;s<o.length;s++){var c=o[s].split("="),u=c[0],l=u.match(/^\.*/g)[0].length;if(0===l)a=u.split(e);else{if(l>a.length)throw new Error("Invalid key: ".concat(u," when current stack is ").concat(a.join(e)));var d=u.substring(l);(a=a.slice(0,l)).push(d),c[0]=a.join(e)}i[c[0]]=c.length>1?r?p(decodeURIComponent(c[1])):c[1]:null}return i},t}();function c(t,e){return e<1?t.slice():t.reduce(function(t,n){return t.concat(Array.isArray(n)?c(n,e-1):n)},[])}function u(t){return"string"==typeof t&&!isNaN(t)&&!isNaN(parseFloat(t))}function l(t){var e=!1;"string"==typeof t&&((a.includes(t)||u(t))&&(e=!0),t=t.replaceAll(n,"~~").replaceAll(o,"~_").replaceAll(" ",o));var i=encodeURIComponent(t);return(e?r:"")+i}function p(t){return(null==t?void 0:t.length)>0&&"Â¶"===t[0]?d(t.slice(1)):i.includes(t)?"true"===t:u(t)?parseFloat(t):d(t)}function d(t){var e=String.fromCharCode(1);return t.replaceAll("~_",e).replaceAll(o," ").replaceAll(e,o)}var h,f=function(){function t(){}return t.prototype.get=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e,n=new RegExp("[\\?&]"+t+"=([^&#]*)","i").exec(location.search);if(null===n&&(n=new RegExp("[#&]"+t+"=([^&#]*)","i").exec(location.hash)),null===n){var r=location.pathname.match(new RegExp("/"+t+"/([^/]+)","i"));r&&r.length>1&&(e=r.reverse()[0])}else e=n[1];return null==e?"":decodeURIComponent(e.replace(/\+/g," "))},t.prototype.require=function(t){var e=this.get(t);if(""===e){var n="Required parameter (".concat(t,") missing from url - cannot continue");throw alert(n),n}return e},t.prototype.isDebug=function(){var t;return"true"===(null===(t=this.get("debug"))||void 0===t?void 0:t.toLocaleLowerCase())},t.prototype.toUrl=function(t){return(new s).toUrl(t,!0)},t.prototype.toObj=function(t){return(new s).toObj(t,!0)},t}(),y=function(){this.watchDomChanges=0},v="2sxc",g="20.00.09",m=["app","app-sys","app-api","app-query","app-content","eav","view","dnn"],w={InstanceId:"data-cb-instance",Context:"data-edit-context",ContentBlockId:"data-cb-id"},b={Attributes:w,Sel:{SxcDivs:"div[".concat(w.Context,"]")}};!function(t){t.log="log",t.warn="warn",t.error="error",t.throw="throw"}(h||(h={}));var x,O,_,C=function(){function t(t,e,n){var r=this;this.initLog=function(t,e,n){return r.initLogInternal(t,e,n)},this.initLogInternal(t,e,n)}return t.prototype.initLogInternal=function(t,e,n){null!=this.log?(this.log.rename(t),this.log.linkLog(e),null!=n&&this.log.add(n)):this.log=new E(t,e,n)},t}(),A={isDevBuild:!0,cms:{autoDump:!1,run:!0},log:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,t)},parts:(x={commandInfo:!1,ToolbarConfigLoaderV10:!1,RuleManager:!1,CommandTippy:!1},x["Q-E.Clpbrd"]=!1,x["Rnd.Rndrer"]=!1,x["QDl.IfBrig"]=!1,x["Cmd.Exec"]=!1,x["Cms.Api"]=!1,x["Q-E.Main"]=!1,x.debugObservables=!1,x["Sys.Bootst"]=!1,x["Bts.Module"]=!1,x)},S=-1!==location.search.indexOf("debug=true"),E=function(){function t(t,e,n){var r=this;if(this.entries=new Array,this.depth=0,this.callDepths=[],this.maxEntries=1e3,this.liveDump=!1,this._parentHasLiveDump=!1,this.keepData=S,this._parentHasKeepData=!1,this.fullIdentifier=function(){return"".concat(r.parent?r.parent.fullIdentifier():"").concat(r.identifier())},this.linkLog=function(t){r.parent=t||r.parent,r.parent&&(r._parentHasLiveDump=r.parent.liveDump||r.parent._parentHasLiveDump,r._parentHasKeepData=r.parent.keepData||r.parent._parentHasKeepData)},this.scope="tdo",this.name="unknwn",this.id=function(){return r.idCache||(r.idCache=r.randomString(2))},this.identifier=function(){return"".concat(r.scope).concat(r.name,"(").concat(r.id(),")")},this.rename(t),this.linkLog(e),A.isDevBuild){var o=A.parts[t];null!=o&&(this.liveDump=o,this.keepData=o)}this.startTime=(new Date).getTime(),null!=n&&this.add(n)}return t.prototype.rename=function(t){try{var e=t.indexOf(".");this.scope=e>0?t.substr(0,Math.min(e,3))+".":"";var n=e>0?t.substr(e+1):t;this.name=n.substr(0,Math.min(n.length,6)),this.name=this.name.substr(0,Math.min(this.name.length,6))}catch(t){}},t.prototype.add=function(t,e){if(this.entries.length>this.maxEntries)return this._prepareMessage(t);this.entries.length===this.maxEntries&&this._addEntry(this._prepareEntry("Maximum amount of entries added to log, will stop adding more"));var n=this._prepareEntry(t,e);return this._addEntry(n),n.message},t.prototype.addData=function(t,e){this.logData()&&this.add(t,e)},t.prototype.logData=function(){return this.keepData||this._parentHasKeepData},t.prototype._prepareEntry=function(t,e){var n=this._prepareMessage(t),r=(new Date).getTime()-this.startTime;return new P(this,n,this.depth,r,e)},t.prototype._prepareMessage=function(t){if(t instanceof Function)try{return t()}catch(t){return"err: message undefined"}return t.toString()},t.prototype.call=function(t,e,n,r){return new T(this,t,e,n,r)},t.prototype._callDepthAdd=function(t){this.depth++,this.callDepths.push(t)},t.prototype._callDepthRemove=function(t){this.depth--;var e=this.callDepths.pop();e!==t&&console.warn("log: call depth reduced by '".concat(t,"' but last was '").concat(e,"'"))},t.prototype.dump=function(t,e){void 0===t&&(t=null),void 0===e&&(e=" - "),t?this.dumpOne(0,t,e):this.dumpList()},t.prototype.dumpList=function(t,e){var n=this;void 0===t&&(t=0);var r=t;this.entries.slice(t,e?t+e:void 0).forEach(function(t){return n.dumpOne(r++,t)})},t.prototype.dumpOne=function(t,e,n){void 0===n&&(n=" - ");var r=e.result?" ="+e.result:"",o=("0000"+t).slice(-4)+" "+e.source()+n+"..".repeat(e.depth)+e.message+r;e.data?console.log(o,e.data):console.log(o)},t.prototype._addEntry=function(t){this.liveDump&&this.dump(t),this.entries.push(t),this.parent&&this.parent._addEntry(t)},t.prototype.randomString=function(t){for(var e="",n=0;n<t;n++){var r=Math.floor(35*Math.random());e+="0123456789abcdefghiklmnopqrstuvwxyz".substring(r,r+1)}return e},t}(),T=function(){function t(t,e,n,r,o){if(this.log=t,this.name=e,this.initialEntry=this.log._prepareEntry(e+"("+(n||"")+")"),this.log._callDepthAdd(e),this.log._addEntry(this.initialEntry),"string"==typeof r&&this.add(r),o)for(var i in o)this.data("initial:"+i,o[i])}return t.prototype.add=function(t,e,n){this.lastMessage=t,this.log.add(t,e),n&&this.processExtraBehavior(n,t,e)},t.prototype.onlyAddIfNew=function(t,e){this.lastMessage!==t&&this.add(t),e&&this.processExtraBehavior(e,t,void 0)},t.prototype.data=function(t,e){this.log.addData(t,e)},t.prototype.done=function(t,e){this.return(null,t||"ðŸ‘",e)},t.prototype.return=function(t,e,n){return e=e||"ðŸ‘",this.initialEntry.result=e,this.log._callDepthRemove(this.name),this.initialEntry.data=t,(this.log.liveDump||this.log._parentHasLiveDump)&&this.add(this.name+" = "+e,t),n&&this.processExtraBehavior(n,e,t),t},t.prototype.processExtraBehavior=function(t,e,n){if(t===h.log&&console.log(e,n),t===h.warn&&console.warn(e,n),t!==h.error&&t!==h.throw||console.error(e,n),t===h.throw)throw e},t}(),I=function(){function t(){}return t.DeepClone=function(t,e){if(void 0===e&&(e=!1),null==t)return t;var n=e?JSON.stringify(t,j):JSON.stringify(t);return null==n?t:JSON.parse(n)},t}(),j=function(){var t=new WeakSet;return function(e,n){if("object"==typeof n&&null!==n){if(t.has(n))return;t.add(n)}return n}},R=function(){function t(){}return t.runScripts=function(t,e){var n=this,r=t[0],o=t.slice(1);if(null!=r){var i=document.createElement("script");if(Array.from(r.attributes).forEach(function(t){i.setAttribute(t.nodeName,t.nodeValue)}),i.textContent=r.textContent,i.type&&i.src){var a=function(){i.onload=null,i.onerror=null,document.head.removeChild(i),n.runScripts(o,e)};return i.onload=a,i.onerror=a,void document.head.appendChild(i)}setTimeout(function(){document.head.appendChild(i),document.head.removeChild(i),n.runScripts(o,e)})}else null==e||e()},t}(),k=function(){function t(){}return t.ready=function(t){"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",function(){return t()},{once:!0})},t.param=function(t){var e=Object.entries(t).map(function(t){var e=t[0],n=t[1];return"".concat(encodeURIComponent(e),"=").concat(null==n?"":"string"==typeof n?encodeURIComponent(n):encodeURIComponent(JSON.stringify(n)))}).join("&");return e},t.domFromString=function(e){var n=document.createElement("div");n.insertAdjacentHTML("afterbegin",e),Array.from(n.querySelectorAll("script")).forEach(function(e){var n=document.createElement("script");Array.from(e.attributes).forEach(function(t){n.setAttribute(t.nodeName,t.nodeValue)}),n.textContent=e.textContent,t.replaceWith(e,n,!1)});var r=Array.from(n.children);return r.forEach(function(t){n.removeChild(t)}),r},t.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}},t.width=function(t){var e=getComputedStyle(t);return 0===t.offsetWidth?0:t.offsetWidth-(parseInt(e.getPropertyValue("border-left-width"),10)+parseInt(e.getPropertyValue("border-right-width"),10))-(parseInt(e.getPropertyValue("padding-left"),10)+parseInt(e.getPropertyValue("padding-right"),10))},t.height=function(t){var e=getComputedStyle(t);return 0===t.offsetHeight?0:t.offsetHeight-(parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("border-bottom-width"),10))-(parseInt(e.getPropertyValue("padding-top"),10)+parseInt(e.getPropertyValue("padding-bottom"),10))},t.empty=function(t){Array.from(t.childNodes).forEach(function(e){t.removeChild(e)})},t.replaceWith=function(t,e,n){var r=t.parentElement,o=Array.from(e.querySelectorAll("script")),i=[];o.forEach(function(t){i.push({script:t,type:t.type}),t.type=null}),r.replaceChild(e,t),i.forEach(function(t){t.script.type=t.type}),n&&R.runScripts(o,void 0)},t.append=function(t,e,n){var r=[];e.forEach(function(e){if("script"===e.tagName.toLocaleLowerCase()){var n=e,o=n.type;n.type=null,t.appendChild(n),n.type=o,r.push(n)}else t.appendChild(e)}),n&&r.length>0&&R.runScripts(r,void 0)},t}(),P=function(){function t(t,e,n,r,o){var i=this;this.log=t,this.message=e,this.depth=n,this.time=r,this.source=function(){return i.log.fullIdentifier()},o&&(this.data=o)}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){void 0!==t&&this.log.logData()&&(this._data=I.DeepClone(t,!0))},enumerable:!1,configurable:!0}),t}(),D=(O=function(t,e){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},O(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),M=function(t){function e(){var e=t.call(this,"Sys.Insght")||this;return e.history={},e.add("system","insights",e.log),e.log.add("this log is usually empty, as it's just a helper tool"),e}return D(e,t),e.prototype.add=function(t,e,n){t in this.history||(this.history[t]=new L(t)),this.history[t].logs.push({key:e,log:n})},e.prototype.show=function(t,e,n,r){if(t){var o=this.history[t];if(o)if(void 0!==e){var i=o.logs.length>=e&&o.logs[e];if(i)if(i.log){console.log("Will dump the log for ".concat(t,"[").concat(e,"] '").concat(i.key,"'"));var a=!1;void 0===n&&(a=!0,n=0,r=25),i.log.dumpList(n||0,r),a&&i.log.entries.length>r&&console.warn("Only showing ".concat(r," of ").concat(i.log.entries.length," logs. To show all, add start param '..., 0)' or start/length '..., 0, 100)'"))}else console.error("found index ".concat(e," on part '").concat(t,"' but it has no logs"));else console.error("index ".concat(e," not found in part '").concat(t,"'"))}else{var s=0,c=o.logs.map(function(e){return"$2sxc.insights('".concat(t,"', ").concat(s++,"); - will show for '").concat(e.key,"'")}).join("\n");console.log("'".concat(t,"' contains ").concat(o.logs.length," entries. Copy/paste the code to to see the logs: \n")+c)}else console.error("part '".concat(t,"' not found"))}else{var u=Object.keys(this.history);console.log("".concat("This is the $2sxc JS Insights - see https://go.2sxc.org/insights \nAdd ?debug=true to the url to log more data. \nCopy/paste code lines below to see details. \n----------------------------------------------------------------------\n").concat(u.length," insights-sections found: \n")+u.map(function(t){return"$2sxc.insights('".concat(t,"');")}).join("\n"))}},e}(C),L=function(t){this.name=t,this.logs=[]},N=window.$2sxc&&window.$2sxc._insights||new M,H="/desktopmodules/ToSic.Sxc/",U="RequestVerificationToken",J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B="You must inject the jsApi parameters to prevent auto-detection.",F=function(t){function e(e){var n=t.call(this,"Env.DnnLdr",e.log)||this;return n.env=e,n}return J(e,t),e.prototype.dnnSfFallback=function(){var t=this,e=this.log.call("dnnSfFallback");k.ready(function(){return t.dnnSfLoadWhenDocumentReady()}),e.done("started dom-ready watcher")},e.prototype.dnnSfLoadWhenDocumentReady=function(){var t=this.log.call("dnnSfLoadWhenDocumentReady");if(void 0===window.$)throw t.done("error"),"Can't load pageid, moduleid, etc. and $ is not available. \n ".concat(B);var e=window.$.ServicesFramework;if(void 0===e)throw t.done("error"),"Can't load pageid, moduleid etc. and DNN SF is not available. \n ".concat(B);var n=e(0),r=n.getServiceRoot("2sxc"),o={page:n.getTabId(),root:"unknown",api:r,appApi:r,rvtHeader:U,rvt:n.getAntiForgeryValue(),uiRoot:H,platform:"dnn"};this.env.load(o,"dnn SF"),t.done()},e}(C),q="input[name=__RequestVerificationToken]",V=function(){function t(t){this.mainLoader=t,this.log=new E("ldr.dynmic",t.log)}return t.prototype.startMetaTagObserver=function(t){var e=this;this.observer||(this.observer=new MutationObserver(function(n){for(var r=0,o=n;r<o.length;r++){var i=o[r];"attributes"===i.type&&i.attributeName===t&&e.mainLoader.updateEnv(JSON.parse(e.mainLoader.getMetaContent()))}}),this.log.add("start observing meta tag"),this.observer.observe(this.mainLoader.getJsApiMetaTag(),{attributes:!0,childList:!1,subtree:!1}))},t.prototype.startInputRvtObserver=function(){var t=this;if(!this.inputRvtObserver){this.inputRvtObserver=new MutationObserver(function(e){for(var n=0,r=e;n<r.length;n++){var o=r[n];"attributes"===o.type&&"value"===o.attributeName&&t.loadRvtFromHiddenInput(o.target)}}),this.log.add("start observing Rvt Input");var e=document.querySelector(q);null!=e?(this.loadRvtFromHiddenInput(e),this.inputRvtObserver.observe(e,{attributes:!0,childList:!1,subtree:!1})):console.log("Can't find Oqtane RVT field with selector ".concat(q,"\n")+"So we cannot watch it for changes.\nThis will probably cause the $2sxc to fail.")}},t.prototype.loadRvtFromHiddenInput=function(t){this.log.add("Input Rvt updated"),t&&t.value&&this.mainLoader.env.updateRvt(t.value)},t}(),$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K="content",z=function(t){function e(e){var n=t.call(this,"Env.MetaLd",e.log)||this;return n.env=e,n.retries=0,n.dynamicPageHelper=new V(n),n}return $(e,t),e.prototype.loadMetaFromHeader=function(t){var e=this;void 0===t&&(t=!1);var n=this.log.call("loadMetaFromHeader","".concat(t));if(this.env.ready)return n.done("loadMeta - ready");this.log.add("loadMetaFromHeader: start, retry:"+this.retries+", force fallback: "+t);var r=this.getMetaContent();if(!r)return this.retries++,t||this.retries>=100?(new F(this.env).dnnSfFallback(),n.done()):(setTimeout(function(){e.loadMetaFromHeader()},10),n.done("will retry"));this.updateEnv(JSON.parse(r)),this.dynamicPageHelper.startMetaTagObserver(K),n.done()},e.prototype.updateEnv=function(t){this.log.add("meta env info updated"),this.env.load(t,"meta header"),"oqtane"===t.platform&&this.dynamicPageHelper.startInputRvtObserver()},e.prototype.getMetaContent=function(){var t=this.getJsApiMetaTag();return t?t.getAttribute(K):null},e.prototype.getJsApiMetaTag=function(){return document.querySelector("meta[name=".concat("_jsApi","]"))},e.prototype.startMetaTagObserver=function(){var t=this;this.observer||(this.observer=new MutationObserver(function(e){for(var n=0,r=e;n<r.length;n++){var o=r[n];"attributes"===o.type&&o.attributeName===K&&t.updateEnv(JSON.parse(t.getMetaContent()))}}),this.log.add("start observing meta tag"),this.observer.observe(this.getJsApiMetaTag(),{attributes:!0,childList:!1,subtree:!1}))},e}(C),W=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(t){function e(){var e=t.call(this,"Environment",null,"starting")||this;return e.ready=!1,e.source="",e.log.keepData=!0,N.add("system","environment",e.log),e.metaLoader=new z(e),"undefined"!=typeof _jsApi?(e.log.add("found _jsApi, will use"),e.load(_jsApi,"global variable _jsApi")):(e.log.add("will start initializing"),e.metaLoader.loadMetaFromHeader()),e}return W(e,t),e.prototype.load=function(t,e){var n=this.log.call("load");if(t.root&&!t.api){n.add("root provided, api missing, will auto-complete");var r=t.root.endsWith("/")?"":"/";t.api="".concat(t.root).concat(r).concat("desktopmodules/2sxc/api/")}this.header=t,this.replacedRvt&&(this.header.rvt=this.replacedRvt),this.ready=!0,this.source=e||"external/unknown"+(this.replacedRvt?"+rvt":""),n.return(t,"loaded from "+this.source)},e.prototype.updateRvt=function(t){t&&(this.replacedRvt=t,this.header.rvt=t)},e.prototype.api=function(){return this.ensureReadyOrThrow("api"),this.header.api},e.prototype.appApi=function(){return this.ensureReadyOrThrow("appApi"),this.header.appApi},e.prototype.page=function(){return this.ensureReadyOrThrow("page"),this.header.page},e.prototype.rvtHeader=function(){return this.ensureReadyOrThrow("rvtHeader"),this.header.rvtHeader||U},e.prototype.rvt=function(){return this.ensureReadyOrThrow("rvt"),this.header.rvt},e.prototype.uiRoot=function(){return this.ensureReadyOrThrow("uiRoot"),this.header.uiRoot||H},e.prototype.platform=function(){return this.ensureReadyOrThrow("platform"),this.header.platform||"dnn"},e.prototype.dialogQuery=function(){var t;return null!==(t=this.header.dialogQuery)&&void 0!==t?t:null},e.prototype.publicKey=function(){var t;return null!==(t=this.header.publicKey)&&void 0!==t?t:null},e.prototype.ensureReadyOrThrow=function(t){if(!this.ready&&(this.log.add("ensureReady - force last attempt to load MetaHeader for "+t),this.metaLoader.loadMetaFromHeader(!0),!this.ready))throw"Can't find ".concat(t," - something went wrong, pls contact 2sxc.org")},e}(C),Q=function(){function t(t,e){this.api=t,this.sxc=e}return t.prototype.makePromise=function(t){var e=this.api.headers();if(null==window.$)throw new Error("JQuery is now removed from 2sxc installation. Please use newer api like fetch or include JQuery in your project");var n=window.$.ajax({async:!0,dataType:t.dataType||"json",data:JSON.stringify(t.data),contentType:"application/json",type:t.method,url:this.getActionUrl(t),beforeSend:function(t){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])}});return t.preventAutoFail||n.fail(this.sxc.showDetailedHttpError),n},t.prototype.getActionUrl=function(t){var e=t.url||"app/auto/api/"+t.controller+"/"+t.action;return this.sxc.http.apiUrl(e,t.endpoint)+(t.params?"?"+k.param(t.params):"")},t}(),Y=function(t,e,n){this.version=1,this.data=t,this.key=e,this.iv=n},Z=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},X=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},tt=function(){function t(t,e){var n,r,o;this.sxc=t,this.encryptBody=null!==(r=null!==(n=e.encryptBody)&&void 0!==n?n:e.encrypt)&&void 0!==r?r:"auto",this.throwIfFails=1==e.encryptBody||"force"==e.encryptBody,this.encryptShowErrorToUser=null!==(o=e.encryptShowErrorToUser)&&void 0!==o&&o}return t.prototype.encryptData=function(t){return Z(this,void 0,void 0,function(){var e,n,r,o,i,a,s,c,u,l,p,d,h;return X(this,function(f){switch(f.label){case 0:return!1===this.encryptBody?[2,t]:(e=this.sxc.env.publicKey())?window.crypto.subtle?[4,this.importPublicKey(e)]:(this.handleOrThrowError("Encryption is not available because 'window.crypto.subtle' is unavailable. Check if page is on HTTPS."),[2,t]):(this.handleOrThrowError("Encryption is not available. Public key is missing."),[2,t]);case 1:return n=f.sent(),[4,window.crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"])];case 2:return r=f.sent(),[4,window.crypto.subtle.exportKey("raw",r)];case 3:return o=f.sent(),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,o)];case 4:return i=f.sent(),a=window.crypto.getRandomValues(new Uint8Array(16)),s=new TextEncoder,c=JSON.stringify(null!=t?t:""),u=s.encode(c),[4,window.crypto.subtle.encrypt({name:"AES-CBC",iv:a},r,u)];case 5:return l=f.sent(),p=this.arrayBufferToBase64(i),d=this.arrayBufferToBase64(l),h=this.arrayBufferToBase64(a.buffer),[2,new Y(d,p,h)]}})})},t.prototype.handleOrThrowError=function(t){if(this.encryptShowErrorToUser&&alert(t),this.throwIfFails)throw new Error(t)},t.prototype.getSpkiDer=function(t){var e=window.atob(t);return this.str2ab(e)},t.prototype.importPublicKey=function(t){return Z(this,void 0,void 0,function(){return X(this,function(e){switch(e.label){case 0:return[4,window.crypto.subtle.importKey("spki",this.getSpkiDer(t),{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return[2,e.sent()]}})})},t.prototype.str2ab=function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return e},t.prototype.arrayBufferToBase64=function(t){for(var e=new Uint8Array(t),n="",r=0;r<e.byteLength;r++)n+=String.fromCharCode(e[r]);return window.btoa(n)},t}(),et=function(){return et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},et.apply(this,arguments)},nt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},rt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ot=function(){function t(t){this.sxc=t}return t.prototype.get=function(t,e,n,r){return this.request(t,e,n,r,"GET")},t.prototype.post=function(t,e,n,r){return this.request(t,e,n,r,"POST")},t.prototype.delete=function(t,e,n,r){return this.request(t,e,n,r,"DELETE")},t.prototype.put=function(t,e,n,r){return this.request(t,e,n,r,"PUT")},t.prototype.request=function(t,e,n,r,o){if("object"!=typeof e&&void 0!==e&&(e={id:e}),"string"==typeof t){var i=t.split("/"),a=i[0],s=i[1];""!==a&&""!==s||console.warn("Error: controller or action not defined. Will continue with likely errors."),t={controller:a,action:s,params:e,data:n,url:i.length>2?t:null,preventAutoFail:r}}var c={method:null===o?"POST":o,params:null,preventAutoFail:!1},u=new Q(this,this.sxc);return t=Object.assign({},c,t),u.makePromise(t)},t.prototype.fetchRaw=function(t,e,n){return nt(this,void 0,void 0,function(){var r,o,i,a,s;return rt(this,function(c){switch(c.label){case 0:return r={},o=this.sxc.ctx,i=t.toLocaleLowerCase(),(null==o?void 0:o._autoAppIdsInUrl)&&i.includes("app/auto/")&&(o.appId&&!i.includes("appid=")&&(r.appId=o.appId),o.zoneId&&!i.includes("zoneid=")&&(r.zoneId=o.zoneId)),t=this.url(t,r),a=this.prepareOptions(n,e),s=this.headers(a.method),"POST"!=a.method?[3,2]:[4,new tt(this.sxc,a).encryptData(e)];case 1:e=c.sent(),c.label=2;case 2:if(e)try{JSON.parse(e)}catch(t){e=JSON.stringify(e)}return[2,fetch(t,et({headers:s,method:a.method},e&&{body:e}))]}})})},t.prototype.prepareOptions=function(t,e){var n,r,o,i={method:e?"POST":"GET",encrypt:"auto",encryptBody:"auto"};return"string"==typeof t?et(et({},i),{method:t}):"object"==typeof t?et(et({},t),{method:t.method||i.method,encrypt:null!==(n=t.encrypt)&&void 0!==n?n:i.encrypt,encryptBody:null!==(o=null!==(r=t.encryptBody)&&void 0!==r?r:t.encrypt)&&void 0!==o?o:i.encryptBody}):i},t.prototype.fetch=function(t,e,n){return nt(this,void 0,void 0,function(){return rt(this,function(r){return console.warn("You are calling 'fetch' on the sxc.webApi. This is deprecated will stop in 2sxc v15, please use fetchRaw(...) or fetchJson(...) instead."),[2,this.fetchJson(t,e,n)]})})},t.prototype.fetchJson=function(t,e,n){return nt(this,void 0,void 0,function(){return rt(this,function(r){return[2,this.fetchRaw(t,e,n).then(function(t){return t.json()})]})})},t.prototype.headers=function(t){var e=this.sxc.http.headers(this.sxc.id,this.sxc.cbid,this.sxc.ctx);return t?("GET"===t.toLocaleUpperCase()?e.Accept="application/json":(e.Accept="application/json",e["Content-Type"]="application/json"),e):e},t.prototype.url=function(t,e){if(null==t)return t;var n=t.split("#")[0].split("?"),r=(t=n[0]).split("/");if(2===r.length&&r[0]&&r[1]){var o=r[0],i=r[1];t="app/auto/api/".concat(o,"/").concat(i)}return[t=this.sxc.http.apiUrl(t),e="".concat(n[1]||"","&").concat(e?"string"==typeof e?e:k.param(e):"").split("&").filter(function(t){return!!t}).join("&")].filter(function(t){return!!t}).join("?")},t}();!function(t){t[t.Undefined=0]="Undefined",t[t.None=1]="None",t[t.Attribute=2]="Attribute",t[t.App=3]="App",t[t.Entity=4]="Entity",t[t.ContentType=5]="ContentType",t[t.Zone=6]="Zone",t[t.CmsItem=10]="CmsItem",t[t.System=11]="System",t[t.Site=12]="Site",t[t.SiteVariant=13]="SiteVariant",t[t.Page=14]="Page",t[t.PageVariant=15]="PageVariant",t[t.Module=16]="Module",t[t.ModuleVariant=17]="ModuleVariant",t[t.User=18]="User",t[t.Custom=90]="Custom",t[t.Custom1=91]="Custom1",t[t.Custom2=92]="Custom2",t[t.Custom3=93]="Custom3",t[t.Custom4=94]="Custom4",t[t.Custom5=95]="Custom5",t[t.Custom6=96]="Custom6",t[t.Custom7=97]="Custom7",t[t.Custom8=98]="Custom8",t[t.Custom9=99]="Custom9"}(_||(_={}));var it=function(t,e){this.sxc=t,this.partName=e},at=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),st=function(t){function e(e,n,r){var o=t.call(this,e,"data")||this;if(o.name=n,o.webApi=e.webApi,r+=" name ",null==n)throw r+"is empty";if(-1!=n.indexOf("/")||-1!=n.indexOf("\\"))throw r+"has slashes - not allowed";if(-1!=n.indexOf("?"))throw r+'has "?" - not allowed';return o}return at(e,t),e}(it),ct=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut="app/auto/data",lt=function(t){function e(e,n){var r=t.call(this,e,n,"ContentType")||this;return r.name=n,r}return ct(e,t),e.prototype.getAll=function(){return this.getInternal()},e.prototype.getOne=function(t){return this.getInternal(t)},e.prototype.getMany=function(t,e){throw"not implemented - probably v13.5 or something"},e.prototype.getInternal=function(t,e){var n="".concat(ut,"/").concat(this.name);return!t||"string"!=typeof t&&"number"!=typeof t||(n+="/"+t),this.webApi.fetchJson(this.webApi.url(n,e))},e.prototype.create=function(t,e){var n="".concat(ut,"/").concat(this.name);if(null!=e){"string"==typeof e&&(e={Target:_.Entity,Guid:e});try{t.For=e}catch(t){}}return this.webApi.fetchJson(this.webApi.url(n),t,"POST")},e.prototype.update=function(t,e){var n="".concat(ut,"/").concat(this.name,"/").concat(t);return this.webApi.fetchJson(this.webApi.url(n),e,"POST")},e.prototype.delete=function(t){var e="".concat(ut,"/").concat(this.name,"/").concat(t);return this.webApi.fetchRaw(this.webApi.url(e),void 0,"DELETE").then(function(t){return null})},e}(st),pt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dt=function(t){function e(e,n){var r=t.call(this,e,n,"Query")||this;return r.name=n,r}return pt(e,t),e.prototype.getAll=function(t,e){return this.getInternal(void 0,t,e)},e.prototype.getStream=function(t,e,n){if(-1!==t.indexOf(","))throw"parameter 'stream' can only contain one stream name for 'getStream'";return this.getInternal(t,e,n).then(function(e){return null!=e&&e.hasOwnProperty(t)?e[t]:[]})},e.prototype.getStreams=function(t,e,n){return this.getInternal(t,e,n)},e.prototype.getInternal=function(t,e,n){var r="app/auto/query/"+this.name;return t&&"string"==typeof t&&(r+="?stream="+t),this.webApi.fetchJson(this.webApi.url(r,e),n)},e}(st),ht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(t){function e(e){return t.call(this,e,"cms")||this}return ht(e,t),e.prototype.run=function(t){throw'cms.run() requires editing to be on, or page-feature "2sxc.JsCms" to be enabled to work'},e}(it),yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(t){function e(e){var n=t.call(this,"Sxc.Http")||this;return n.env=e,n}return yt(e,t),e.prototype.headers=function(t,e,n){var r,o,i,a=this.log.call("headers","".concat(t,", ").concat(e)),s={},c=(null!==(r=null==n?void 0:n.pageId)&&void 0!==r?r:this.env.page()).toString();return t=null!==(o=null==n?void 0:n.moduleId)&&void 0!==o?o:t,e=null!==(i=null==n?void 0:n.blockId)&&void 0!==i?i:e,(null==n?void 0:n._noContextInHttpHeaders)||(t&&(s.ModuleId=t.toString()),e&&(s.ContentBlockId=e.toString()),s.TabId=c,s.PageId=c),s[this.env.rvtHeader()]=this.env.rvt(),a.return(s,"headers(id:".concat(t,", cbid:").concat(e,")"))},e.prototype.apiRoot=function(t){var e=this.log.call("apiRoot"),n=this.env.api().replace("e.x.t",t);return e.return(n,"apiRoot('".concat(t,"')"))},e.prototype.appApiRoot=function(){var t,e=this.log.call("appApiRoot"),n=null!==(t=this.env.appApi())&&void 0!==t?t:this.apiRoot(v);return e.return(n,"appApiRoot()")},e.prototype.apiUrl=function(t,e){var n=this.log.call("apiUrl");if(this.log.add("apiUrl(url:'".concat(t,"', endpointName:'").concat(e,"')")),null==t)return t;if(!t||0==t.indexOf("http:")||0==t.indexOf("https:")||0==t.indexOf("//"))return n.return(t);if(!e&&(0==t.indexOf("/")||0==t.indexOf(".")))return n.return(t);var r=t.toLocaleLowerCase().startsWith("app")?this.appApiRoot():this.apiRoot(e||v);return"/"!=r[r.length-1]&&(r+="/"),"/"==t[0]&&(t=t.slice(1)),n.return(r+t)},e}(C),gt=function(){function t(){}return t.getContext=function(e,n){var r=n?t.getContainerTag(n):t.getTag(e);return t.getContextOfTag(r)},t.getContextOfTag=function(t){var e=null==t?void 0:t.getAttribute(b.Attributes.Context);return JSON.parse(e||"{ }")},t.getContainerTag=function(t){return t.closest(b.Sel.SxcDivs)},t.getTag=function(t){return document.querySelector("div[".concat(b.Attributes.ContentBlockId,"='").concat(t.cbid,"']"))},t}(),mt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(){return wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},wt.apply(this,arguments)},bt=function(t){function e(e,n,r,o,i){var a,s,c,u=this;(u=t.call(this,"SxcInstance",null,"Generating for "+e+":"+n)||this).id=e,u.cbid=n,u.cacheKey=r,u.root=o,u.ctx=i,u._isSxcInstance=!0,u.manage=null,u.cms=new ft(u);try{o._manage&&o._manage.initInstance(u)}catch(t){console.error("error in 2sxc - will only log but not throw",t)}var l,p=u.loadEnv(o);return u.env=p.env,u.http=p.http,u.webApi=new ot(u),(l=u.data).on||(l.on=function(){throw xt},Object.defineProperty(l,"sourceUrl",{get:function(){throw xt}})),o._translateInit&&(null===(c=null===(s=null===(a=u.manage)||void 0===a?void 0:a.context)||void 0===s?void 0:s.app)||void 0===c?void 0:c.currentLanguage)&&o._translateInit(u.manage),u}return mt(e,t),e.prototype.loadEnv=function(t){var e,n,r,o,i=null!==(r=null===(n=null===(e=this.manage)||void 0===e?void 0:e.editContext)||void 0===n?void 0:n.jsApi)&&void 0!==r?r:null===(o=gt.getContext(this))||void 0===o?void 0:o.jsApi;if(!i)return{env:t.env,http:t.http};var a=t.env.headers,s=i?wt(wt({},a),i):a,c=new G;return c.load(s,"sxc-instance"),{env:c,http:new vt(c)}},e.is=function(t){return t._isSxcInstance},e.prototype.data=function(t){return new lt(this,t)},e.prototype.query=function(t){return new dt(this,t)},e.prototype.resolveServiceUrl=function(t){var e=t.split("/")[0].toLowerCase();return-1===m.indexOf(e)?t:this.http.apiRoot(v)+e+"/"+t.substring(t.indexOf("/")+1)},e.prototype.showDetailedHttpError=function(t){if(window.console&&console.log(t),404===t.status&&t.config&&t.config.url&&t.config.url.indexOf("/dist/i18n/")>-1)return window.console&&console.log("just fyi: failed to load language resource; will have to use default"),t;if(0===t.status||-1===t.status)return t;var e="Had an error talking to the server (status "+t.status+").",n=t.responseText?JSON.parse(t.responseText):t.data;if(n){var r=n.Message;r&&(e+="\nMessage: "+r);var o=n.MessageDetail||n.ExceptionMessage;o&&(e+="\nDetail: "+o),o&&0===o.indexOf("No action was found")&&(o.indexOf("that matches the name")>0?e+="\n\nTip from 2sxc: you probably got the action-name wrong in your JS.":o.indexOf("that matches the request.")>0&&(e+="\n\nTip from 2sxc: Seems like the parameters are the wrong amount or type.")),r&&0===r.indexOf("Controller")&&r.indexOf("not found")>0&&(e+="\n\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.")}return e+="\n\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug",alert(e),t},e.prototype.isEditMode=function(){var t;return!0===(null===(t=this.manage)||void 0===t?void 0:t._isEditMode())},e.prototype.recreate=function(t){return t&&delete this.root._controllers[this.cacheKey],this.root(this.id,this.cbid)},e}(C),xt='Warning Obsolete Feature on 2sxc JS: the .data has been obsolete for a long time and is repurposed. \nIf you are calling ".data.on(...)" or ".data.sourceUrl" you are running very old code. \nGuidance to fix this: https://go.2sxc.org/brc-13-id.',Ot=function(){function t(){}return t.is=function(t){var e=t;return void 0!==e.zoneId&&void 0!==e.appId},t.ensureCompleteOrThrow=function(t){if(t.zoneId&&t.appId)return t;var e="It looks like the id given is a ContextIdentifier, but it's missing either zoneId or appId.";throw console.error(e,t),e},t.toCacheKey=function(t){return this.ensureCompleteOrThrow(t),"".concat(t.zoneId,"/").concat(t.appId,"/").concat(t.pageId,"/").concat(t.moduleId,"/").concat(t.blockId)},t}();function _t(t,e){var n,r=window.$2sxc;if(r.log.add("FindSxcInstance("+t+","+e),!r._controllers)throw new Error("$2sxc not initialized yet");if(bt.is(t))return t;var o=null;if(Ot.is(t))t=null!==(n=(o=Ot.ensureCompleteOrThrow(t)).moduleId)&&void 0!==n?n:1e5*o.zoneId+o.appId;else if(t instanceof HTMLElement&&t.matches(".sc-menu[toolbar],.sc-menu[data-toolbar],[sxc-toolbar]")&&!t.closest("div[data-edit-context]")){var i="sxc-context",a=t.getAttribute(i),s=JSON.parse(a);if(null==s)throw new Error("Toolbar outside of module without ".concat(i," attribute found."));return _t(s)}if("object"==typeof t){var c=function(t){var e=t.closest(".sc-content-block");if(!e)return null;var n=e.getAttribute("data-cb-instance"),r=e.getAttribute("data-cb-id");return n&&r?[parseInt(n,10),parseInt(r,10)]:null}(t);t=c[0],e=c[1]}e||(e=t);var u=null!=o?Ot.toCacheKey(o):t+":"+e;return r._controllers[u]?(r.log.add("Cache found for: "+u),r._controllers[u]):r._controllers[u]=new bt(t,e,u,r,o)}var Ct=new f,At=!0===Ct.isDebug(),St=function(){this.load=At,this.uncache=Ct.get("sxcver")};window.$2sxc||(window.$2sxc=function(){var e,n,r=(e=new E("$2sxc",null,"building"),n=new G,{sysinfo:{version:g,description:"The 2sxc Controller - read more about it on docs.2sxc.org"},env:n,http:new vt(n),log:e}),o=new f,i=new St,a=new y,s={get:_t,_controllers:{},beta:{},totalPopup:new t,urlParams:o,debug:i,stats:a,insights:function(t,e,n,r){return N.show(t,e,n,r)},_insights:N},c=Object.assign(_t,s,r);return c.log.add("sxc controller built"),console.log("$2sxc ".concat(g," with insights-logging - see https://go.2sxc.org/insights")),c}()),$2sxcJsApi={}})();
//# sourceMappingURL=https://sources.2sxc.org/20.00.09/js/2sxc.api.min.js.map